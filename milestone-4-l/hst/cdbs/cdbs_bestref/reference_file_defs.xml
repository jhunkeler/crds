<?xml version="1.0" standalone="yes" ?>
<!--==============================================================-->
<!-- fullmaster.xml                                               -->
<!--    The "rules" for determining the best reference files.     -->
<!--                                                              -->
<!--            PR                                                -->
<!--   DATE   NUMBER  User     Description                          -->
<!-- ++++++++ ++++++  ++++++   +++++++++++++++++++++++++++++++++++++-->
<!-- 01/07/03 46981   MSwam    first version                        -->
<!-- 03/07/03 46981_01 MSwam   add FWOFFSET to ACS PFL              -->
<!-- 03/27/03 46981_07 MSwam   special case for WFPC2 FLATFILE      -->
<!-- 08/28/03 48726    MSwam   change function invocation syntax    -->
<!-- 11/07/03 49792    MSwam   remove CCD restriction on STIS TDS   -->
<!-- 03/17/04 50488  Slowinski remove obstype restrct. Stis TDSTAB  --> 
<!-- 04/12/04 48141    MSwam   turn off ACS FLS for FLASHCUR=OFF    --> 
<!-- 04/15/04 48141    MSwam   add COS from a branch version        --> 
<!-- 04/22/04 48726    MSwam   add INTERNAL restriction to ACS PFL  --> 
<!-- 05/20/04 48141    MSwam   remove FWERROR check for ACS PFL     --> 
<!-- 05/20/04 48141    MSwam   put FWERROR check back for ACS PFL   --> 
<!-- 06/11/04 51057    MSwam   add ACS MDRIZTAB                     -->
<!-- 06/11/04 51067    MSwam   add ACS GEOFILE                      -->
<!-- 06/11/04 51071    MSwam   add WFPC2 IDCTAB, OFFTAB             -->
<!-- 09/30/04 48984    MSwam   remove WBIAFILE from STIS headers    -->
<!-- 10/18/04 51981    MSwam   add ACS CFLTFILE,SPOTTAB             -->
<!-- 10/18/04 51963    MSwam   add NICMOS IDCTAB                    -->
<!-- 10/19/04 51433    MSwam   replace FWERROR check with FWOFFSET check -->
<!-- 09/09/05 53526    MSwam   add STIS GACTAB                      -->
<!-- 09/15/06 56376    MSwam   add NICMOS SAADFILE                  -->
<!-- 05/10/07 57575  Sherbert  add SUBTYPE for wf3 IR               -->
<!-- 05/21/07 57618    MSwam   add NICMOS ZPRATTAB,RNLCORTB         -->
<!-- 05/21/07 57852    MSwam   add WFPC2 WF4TFILE                   -->
<!-- 07/23/07 58377    MSwam   add COS BRSTTAB                      -->
<!-- 08/09/07 58377    MSwam   add COS TDSTAB and other COS adjustments -->
<!-- 02/28/08 55049    MSwam   add NIC PEDSBTAB,SAACNTAB -->
<!-- 06/05/08 60086    MSwam   add WFC3 MDRIZTAB,DGEOFILE         -->
<!-- 07/02/08 60164  Sherbert  remove OBSMODE from COS FLATs      -->
<!-- 07/16/08 56496    MSwam   replace FWOFFSET with 1,2,S tests  -->
<!-- 08/14/08 56496    MSwam   add WFPC2 DGEOFILE                 -->
<!-- 10/09/08 60598    MSwam   add NIC PMODFILE,PMSKFILE -->
<!-- 10/17/08 61035    MSwam   add NIC TDFFILE -->
<!-- 11/18/08 61237    MSwam   make WFPC2 DGEOFILE select on MODE -->
<!-- 03/02/09 62083    MSwam   change WFC3 BIAS to use special function -->
<!-- 03/11/09 61910    MSwam   change COS PHOTTAB to FLUXTAB            -->
<!-- 06/03/09 62687    MSwam   add WFC3 SWITCH checks -->
<!-- 07/15/09 63053    MSwam   change WFPC2 FLATFILE parms -->
<!-- 07/31/09 63147    MSwam   add NICMOS DRK OBSMODE -->
<!-- 08/27/09 63386    MSwam   remove ACS PFL CCDGAIN file selection -->
<!-- 10/21/09 63766    MSwam   add COS FLAT OPT_ELEM -->
<!-- 10/18/10 66275    MSwam   add COS SPWCSTAB -->
<!-- 05/23/11 66778    MSwam   make COS FLATFILE required -->
<!-- 06/30/11 68298    MSwam   add ACS IMPHTTAB           -->
<!-- 09/01/11 69085    MSwam   add ACS D2IMFILE,NPOLFILE  -->
<!-- 09/08/11 68293    MSwam   add COS WALKTAB            -->
<!-- 10/24/11 69531    MSwam   add WFC3 CHINJECT to BIAS  -->
<!-- 02/05/12 68310    Mary    add ACS DRKCFILE and PCTETAB       -->
<!-- 02/06/12 68310    Mary    refined ACS DRKCFILE and PCTETAB   -->
<!-- 02/06/12 69145    Mary    add COS GSAGTAB                    -->
<!-- 02/07/12 70349    Mary    add COS HVTAB                      -->
<!-- 04/04/12 70951    MSwam   add COS XTRACTAB LIFE_ADJ          -->
<!-- 04/19/12 70951    MSwam   make COS FLATFILE optional         -->
<!-- 05/31/12 71240  Sherbert  WFC3 post-flash updates            -->
<!-- 09/06/12 72156  MSwam     ACS BIAS, add APERTURE field select-->
<!-- 10/01/12 72278  Sherbert  WFC3 image photometry table        -->
<!-- 10/02/12 72278  MSwam     WFC3 IMPHTTAB, make not required for now -->
<!-- 05/23/13 74167  MSwam     remove COS FLAT OPT_ELEM selection -->
<!-- 06/06/13 74559  Mary      add WFC3 D2IMFILE                  -->
<!--==============================================================-->
<REFERENCE_FILES>
<INSTRUMENT>
  <INSTRUMENT_NAME> ACS </INSTRUMENT_NAME>
  <INSTRUMENT_MISSING_FILE> N/A </INSTRUMENT_MISSING_FILE>
  <REFFILE>
    <REFFILE_TYPE>  TMG </REFFILE_TYPE>
    <REFFILE_KEYWORD> GRAPHTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_FUNCTION> filename = cdbs_db.multi_tab( reff) </REFFILE_FUNCTION>
  </REFFILE>
  <!--====================================-->
  <REFFILE>
    <REFFILE_TYPE>  TMC </REFFILE_TYPE>
    <REFFILE_KEYWORD> COMPTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_FUNCTION> filename = cdbs_db.multi_tab( reff) </REFFILE_FUNCTION>
  </REFFILE>
  <!--======================================-->
  <REFFILE>
    <REFFILE_TYPE> FLS </REFFILE_TYPE>
    <REFFILE_KEYWORD> FLSHFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <REFFILE_SWITCH> FLSHCORR </REFFILE_SWITCH>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> CCDGAIN </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FLASHCUR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> SHUTRPOS </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC' and aSource._keywords['FLASHCUR'][0] != 'OFF') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
  <!--======================================-->
  <REFFILE>
    <REFFILE_TYPE> IDC </REFFILE_TYPE>
    <REFFILE_KEYWORD> IDCTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> DETCHIP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> WAVELENGTH </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> DIRECTION </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> BIA </REFFILE_TYPE>
    <REFFILE_KEYWORD> BIASFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <REFFILE_SWITCH> BIASCORR </REFFILE_SWITCH>
    <REFFILE_FUNCTION> filename = cdbs_db.acs_biasfile( reff, aSource) </REFFILE_FUNCTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDGAIN </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> APERTURE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> XCORNER </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> YCORNER </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> NUMCOLS </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> NUMROWS </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> LTV1 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> LTV2 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDCHIP </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DRK </REFFILE_TYPE>
    <REFFILE_KEYWORD> DARKFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <REFFILE_SWITCH> DARKCORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </FILE_SELECTION_TEST>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDGAIN </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> PFL </REFFILE_TYPE>
    <REFFILE_KEYWORD> PFLTFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <REFFILE_SWITCH> FLATCORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </FILE_SELECTION_TEST>
    </FILE_SELECTION> 
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER1 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER2 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> FW1OFFST </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['FW1OFFST'][0] == -1 or aSource._keywords['FW1OFFST'][0] == 1) </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> FW2OFFST </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['FW2OFFST'][0] == -1 or aSource._keywords['FW2OFFST'][0] == 1) </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> FWSOFFST </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['FWSOFFST'][0] == -1 or aSource._keywords['FWSOFFST'][0] == 1) </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] != 'INTERNAL') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> LFL </REFFILE_TYPE>
    <REFFILE_KEYWORD> LFLTFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </FILE_SELECTION_TEST>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDGAIN </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER1 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER2 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DFL </REFFILE_TYPE>
    <REFFILE_KEYWORD> DFLTFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> SHD </REFFILE_TYPE>
    <REFFILE_KEYWORD> SHADFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <REFFILE_SWITCH> SHADCORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> A2D </REFFILE_TYPE>
    <REFFILE_KEYWORD> ATODTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <REFFILE_SWITCH> ATODCORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDCHIP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDAMP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDGAIN </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> BPX </REFFILE_TYPE>
    <REFFILE_KEYWORD> BPIXTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <REFFILE_SWITCH> DQICORR </REFFILE_SWITCH>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDCHIP </ROW_SELECTION_FIELD>
      <ROW_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </ROW_SELECTION_TEST>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDAMP </ROW_SELECTION_FIELD>
      <ROW_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </ROW_SELECTION_TEST>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDGAIN </ROW_SELECTION_FIELD>
      <ROW_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </ROW_SELECTION_TEST>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> CCD </REFFILE_TYPE>
    <REFFILE_KEYWORD> CCDTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDCHIP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDAMP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDGAIN </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> OSC </REFFILE_TYPE>
    <REFFILE_KEYWORD> OSCNTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDCHIP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDAMP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> CRR </REFFILE_TYPE>
    <REFFILE_KEYWORD> CRREJTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <REFFILE_SWITCH> CRCORR </REFFILE_SWITCH>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDCHIP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> LIN </REFFILE_TYPE>
    <REFFILE_KEYWORD> MLINTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <REFFILE_SWITCH> GLINCORR </REFFILE_SWITCH>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'SBC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> MDZ </REFFILE_TYPE>
    <REFFILE_KEYWORD> MDRIZTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <REFFILE_SWITCH> DRIZCORR </REFFILE_SWITCH>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DXY </REFFILE_TYPE>
    <REFFILE_KEYWORD> DGEOFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER1 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER2 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> CFL </REFFILE_TYPE>
    <REFFILE_KEYWORD> CFLTFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER1 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER2 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'HRC' and aSource._keywords['OBSTYPE'][0] == 'CORONAGRAPHIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> CSP </REFFILE_TYPE>
    <REFFILE_KEYWORD> SPOTTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'HRC' and aSource._keywords['OBSTYPE'][0] == 'CORONAGRAPHIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> IMP </REFFILE_TYPE>
    <REFFILE_KEYWORD> IMPHTTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_SWITCH> PHOTCORR </REFFILE_SWITCH>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> D2I </REFFILE_TYPE>
    <REFFILE_KEYWORD> D2IMFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <REFFILE_SWITCH> DRIZCORR </REFFILE_SWITCH>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'WFC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> NPL </REFFILE_TYPE>
    <REFFILE_KEYWORD> NPOLFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <REFFILE_SWITCH> DRIZCORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER1 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER2 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DKC </REFFILE_TYPE>
    <REFFILE_KEYWORD> DRKCFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <REFFILE_SWITCH> PCTECORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </FILE_SELECTION_TEST>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDGAIN </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] != 'SBC') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'WFC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> CTE </REFFILE_TYPE>
    <REFFILE_KEYWORD> PCTETAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <REFFILE_SWITCH> PCTECORR </REFFILE_SWITCH>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'WFC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
<!--====================================-->
</INSTRUMENT>
<INSTRUMENT>
  <INSTRUMENT_NAME> STIS </INSTRUMENT_NAME>
  <INSTRUMENT_MISSING_FILE> BLANK </INSTRUMENT_MISSING_FILE>
  <REFFILE>
    <REFFILE_TYPE>  BIA </REFFILE_TYPE> 
    <REFFILE_KEYWORD> BIASFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CCDGAIN </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CCDOFFST </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> BINAXIS1 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> BINAXIS2 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'CCD') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DRK </REFFILE_TYPE> 
    <REFFILE_KEYWORD> DARKFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'CCD') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDGAIN </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'CCD') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DFL </REFFILE_TYPE> 
    <REFFILE_KEYWORD> DFLTFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD>DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <!-- This phony restriction should be lifted if files ever exist -->
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'D0H') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
 <REFFILE>
    <REFFILE_TYPE> IMP </REFFILE_TYPE>
    <REFFILE_KEYWORD> IMPHTTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> LFL </REFFILE_TYPE> 
    <REFFILE_KEYWORD> LFLTFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> OPT_ELEM  </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> CENWAVE </FILE_SELECTION_FIELD>
        <FILE_SELECTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> APERTURE </FILE_SELECTION_FIELD>
        <FILE_SELECTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'IMAGING') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> PFL </REFFILE_TYPE> 
    <REFFILE_KEYWORD> PFLTFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> OPT_ELEM  </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> CENWAVE </FILE_SELECTION_FIELD>
        <FILE_SELECTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> APERTURE </FILE_SELECTION_FIELD>
        <FILE_SELECTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'IMAGING') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> SSC </REFFILE_TYPE> 
    <REFFILE_KEYWORD> SHADFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <!-- This phony restriction should be lifted if files ever exist -->
    <RESTRICTION>
      <!-- the real one is (aSource._keywords['DETECTOR'][0] == 'CCD') -->
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'D0H') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> SSD </REFFILE_TYPE> 
    <REFFILE_KEYWORD> SDSTFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <!-- This phony restriction should be lifted if files ever exist -->
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'D0H') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> APD </REFFILE_TYPE> 
    <REFFILE_KEYWORD> APDESTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> APERTURE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> APT </REFFILE_TYPE> 
    <REFFILE_KEYWORD> APERTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> APERTURE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> A2D </REFFILE_TYPE> 
    <REFFILE_KEYWORD> ATODTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDAMP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDGAIN </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <!-- This phony restriction should be lifted if files ever exist -->
    <RESTRICTION>
      <!-- the real one is (aSource._keywords['DETECTOR'][0] == 'CCD') -->
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'D0H') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> BPX </REFFILE_TYPE> 
    <REFFILE_KEYWORD> BPIXTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> CCD </REFFILE_TYPE> 
    <REFFILE_KEYWORD> CCDTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDAMP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDGAIN </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDOFFST  </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> BINAXIS1  </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> BINAXIS2 </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'CCD') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> CRR </REFFILE_TYPE> 
    <REFFILE_KEYWORD> CRREJTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CRSPLIT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> MEANEXP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'CCD') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DSP </REFFILE_TYPE> 
    <REFFILE_KEYWORD> DISPTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SPORDER </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> A2CENTER </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> SDC </REFFILE_TYPE> 
    <REFFILE_KEYWORD> SDCTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SPORDER </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> IDC </REFFILE_TYPE> 
    <REFFILE_KEYWORD> IDCTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> FILTER </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> DIRECTION </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'IMAGING') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> IAC </REFFILE_TYPE> 
    <REFFILE_KEYWORD> INANGTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> SPORDER </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> LMP </REFFILE_TYPE> 
    <REFFILE_KEYWORD> LAMPTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> SCLAMP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> LIN </REFFILE_TYPE> 
    <REFFILE_KEYWORD> MLINTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> DETECTOR </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'CCD') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> PHT </REFFILE_TYPE> 
    <REFFILE_KEYWORD> PHOTTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
       <ROW_SELECTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </ROW_SELECTION_TEST>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SPORDER </ROW_SELECTION_FIELD>
       <ROW_SELECTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </ROW_SELECTION_TEST>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> 1DT </REFFILE_TYPE> 
    <REFFILE_KEYWORD> SPTRCTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
	<FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SPORDER </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> 1DX </REFFILE_TYPE> 
    <REFFILE_KEYWORD> XTRACTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> APERTURE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SPORDER </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> MOC </REFFILE_TYPE> 
    <REFFILE_KEYWORD> MOFFTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SPORDER </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'CCD' and aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> PCT </REFFILE_TYPE> 
    <REFFILE_KEYWORD> PCTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> OPT_ELEM </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> APERTURE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> EXTRHEIGHT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> WCP </REFFILE_TYPE> 
    <REFFILE_KEYWORD> WCPTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> DETECTOR </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> CDS </REFFILE_TYPE> 
    <REFFILE_KEYWORD> CDSTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'CCD' and aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> ECH </REFFILE_TYPE> 
    <REFFILE_KEYWORD> ECHSCTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> SPORDER </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'CCD' and aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> EXS </REFFILE_TYPE> 
    <REFFILE_KEYWORD> EXSTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'CCD' and aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> RIP </REFFILE_TYPE> 
    <REFFILE_KEYWORD> RIPTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> SPORDER </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'CCD' and aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> HAL </REFFILE_TYPE> 
    <REFFILE_KEYWORD> HALOTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> REFWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'CCD' and aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> TEL </REFFILE_TYPE> 
    <REFFILE_KEYWORD> TELTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> REFWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'CCD' and aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> SRW </REFFILE_TYPE> 
    <REFFILE_KEYWORD> SRWTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] != 'CCD' and aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> TDS </REFFILE_TYPE> 
    <REFFILE_KEYWORD> TDSTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> GRATING </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> TDC </REFFILE_TYPE> 
    <REFFILE_KEYWORD> TDCTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'NUV-MAMA') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> GAC </REFFILE_TYPE> 
    <REFFILE_KEYWORD> GACTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> APERTURE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> ((aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') and (aSource._keywords['DETECTOR'][0] == 'CCD'))</RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
</INSTRUMENT>
<INSTRUMENT>
  <INSTRUMENT_NAME> NICMOS </INSTRUMENT_NAME>
  <INSTRUMENT_MISSING_FILE> N/A </INSTRUMENT_MISSING_FILE>
  <REFFILE>
    <REFFILE_TYPE> MSK </REFFILE_TYPE> 
    <REFFILE_KEYWORD> MASKFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> NOI </REFFILE_TYPE> 
    <REFFILE_KEYWORD> NOISFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> READOUT </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> NREAD </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DRK </REFFILE_TYPE> 
    <REFFILE_KEYWORD> DARKFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> READOUT </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> NREAD </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> SAMP_SEQ </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> OBSMODE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['SAMP_SEQ'][0] not in ['SPARS4','SPARS16','SPARS32','SPARS128'])</RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> LIN </REFFILE_TYPE> 
    <REFFILE_KEYWORD> NLINFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> FLT </REFFILE_TYPE> 
    <REFFILE_KEYWORD> FLATFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> FILTER </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['FILTER'][0] != 'BLANK')</RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> ILM </REFFILE_TYPE> 
    <REFFILE_KEYWORD> ILLMFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> FILTER </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['FILTER'][0] != 'BLANK')</RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> TDD </REFFILE_TYPE> 
    <REFFILE_KEYWORD> TEMPFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> PHT </REFFILE_TYPE> 
    <REFFILE_KEYWORD> PHOTTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> PHOTMODE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> BKG </REFFILE_TYPE> 
    <REFFILE_KEYWORD> BACKTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> SUNANGLE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> LATITUDE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CAMERA </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> FILTER </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> IDC </REFFILE_TYPE> 
    <REFFILE_KEYWORD> IDCTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> SDK </REFFILE_TYPE> 
    <REFFILE_KEYWORD> SAADFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <REFFILE_FUNCTION> filename = cdbs_db.nicmos_saadfile( reff, aSource) </REFFILE_FUNCTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> ZPR </REFFILE_TYPE> 
    <REFFILE_KEYWORD> ZPRATTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> NLC </REFFILE_TYPE> 
    <REFFILE_KEYWORD> RNLCORTB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> SCN </REFFILE_TYPE> 
    <REFFILE_KEYWORD> SAACNTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CAMERA </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> PSB </REFFILE_TYPE> 
    <REFFILE_KEYWORD> PEDSBTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CAMERA </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> PMD </REFFILE_TYPE> 
    <REFFILE_KEYWORD> PMODFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> PMK </REFFILE_TYPE> 
    <REFFILE_KEYWORD> PMSKFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> TDF </REFFILE_TYPE> 
    <REFFILE_KEYWORD> TDFFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> CAMERA </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
       <FILE_SELECTION_FIELD> FILTER </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['FILTER'][0] != 'BLANK')</RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
</INSTRUMENT>
<INSTRUMENT>
  <INSTRUMENT_NAME> WFPC2 </INSTRUMENT_NAME>
  <INSTRUMENT_MISSING_FILE> N/A </INSTRUMENT_MISSING_FILE>
  <REFFILE>
    <REFFILE_TYPE>  TMG </REFFILE_TYPE> 
    <REFFILE_KEYWORD> GRAPHTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_FUNCTION> filename = cdbs_db.multi_tab( reff) </REFFILE_FUNCTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE>  TMC </REFFILE_TYPE> 
    <REFFILE_KEYWORD> COMPTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_FUNCTION> filename = cdbs_db.multi_tab( reff) </REFFILE_FUNCTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> BAS </REFFILE_TYPE> 
    <REFFILE_KEYWORD> BIASFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> MODE </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> ATODGAIN </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DRK </REFFILE_TYPE> 
    <REFFILE_KEYWORD> DARKFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> MODE </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> ATODGAIN </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> SERIALS </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> FLT </REFFILE_TYPE> 
    <REFFILE_KEYWORD> FLATFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_FUNCTION> filename = cdbs_db.wfpc2_flatfile( reff, aSource) </REFFILE_FUNCTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> MODE </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> FILTER1 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> FILTER2 </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> FILTNAM1 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> FILTNAM2 </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> IMAGETYP </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> LRFWAVE </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> A2D </REFFILE_TYPE> 
    <REFFILE_KEYWORD> ATODFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> MODE </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> ATODGAIN </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> SHD </REFFILE_TYPE> 
    <REFFILE_KEYWORD> SHADFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> MODE </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> SHUTTER </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> MSK </REFFILE_TYPE> 
    <REFFILE_KEYWORD> MASKFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> MODE </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> IDC </REFFILE_TYPE> 
    <REFFILE_KEYWORD> IDCTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> OFF </REFFILE_TYPE> 
    <REFFILE_KEYWORD> OFFTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> W4T </REFFILE_TYPE> 
    <REFFILE_KEYWORD> WF4TFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> ATODGAIN </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DXY </REFFILE_TYPE>
    <REFFILE_KEYWORD> DGEOFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> MODE </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
  </REFFILE>
<!--====================================-->
 </INSTRUMENT>
 <INSTRUMENT>
  <INSTRUMENT_NAME> WFC3 </INSTRUMENT_NAME>
  <INSTRUMENT_MISSING_FILE> N/A </INSTRUMENT_MISSING_FILE>
  <REFFILE>
    <REFFILE_TYPE> BIA </REFFILE_TYPE>
    <REFFILE_KEYWORD> BIASFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> YES </REFFILE_REQUIRED>
    <REFFILE_SWITCH> BIASCORR </REFFILE_SWITCH>
    <REFFILE_FUNCTION> filename = cdbs_db.wfc3_biasfile( reff, aSource) </REFFILE_FUNCTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDGAIN </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> BINAXIS1 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> BINAXIS2 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> APERTURE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> SUBARRAY </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CHINJECT </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DRK </REFFILE_TYPE>
    <REFFILE_KEYWORD> DARKFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_SWITCH> DARKCORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> BINAXIS1 </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> BINAXIS2 </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDGAIN </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'IR') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> SAMP_SEQ </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'IR') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> SUBTYPE </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'IR') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> PFL </REFFILE_TYPE>
    <REFFILE_KEYWORD> PFLTFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_SWITCH> FLATCORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> FILTER </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> BINAXIS1 </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> BINAXIS2 </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['FILTER'][0] != 'BLANK') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DFL </REFFILE_TYPE>
    <REFFILE_KEYWORD> DFLTFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_SWITCH> FLATCORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> FILTER </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> BINAXIS1 </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> BINAXIS2 </FILE_SELECTION_FIELD>
      <FILE_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </FILE_SELECTION_TEST>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> LFL </REFFILE_TYPE>
    <REFFILE_KEYWORD> LFLTFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_SWITCH> FLATCORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> SHD </REFFILE_TYPE>
    <REFFILE_KEYWORD> SHADFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_SWITCH> SHADCORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
  <!--======================================-->
  <REFFILE>
    <REFFILE_TYPE> FLS </REFFILE_TYPE>
    <REFFILE_KEYWORD> FLSHFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_SWITCH> FLSHCORR </REFFILE_SWITCH>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> CCDAMP </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> BINAXIS1 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> BINAXIS2 </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FLASHCUR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> SHUTRPOS </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS' and aSource._keywords['FLASHCUR'][0] != 'OFF') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
  <!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> IMP </REFFILE_TYPE>
    <REFFILE_KEYWORD> IMPHTTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_SWITCH> PHOTCORR </REFFILE_SWITCH>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> LIN </REFFILE_TYPE>
    <REFFILE_KEYWORD> NLINFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'IR') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> TMG </REFFILE_TYPE>
    <REFFILE_KEYWORD> GRAPHTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_FUNCTION> filename = cdbs_db.multi_tab( reff) </REFFILE_FUNCTION>
  </REFFILE>
  <!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> TMC </REFFILE_TYPE>
    <REFFILE_KEYWORD> COMPTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_FUNCTION> filename = cdbs_db.multi_tab( reff) </REFFILE_FUNCTION>
  </REFFILE>
  <!--======================================-->
  <REFFILE>
    <REFFILE_TYPE> IDC </REFFILE_TYPE>
    <REFFILE_KEYWORD> IDCTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDCHIP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> A2D </REFFILE_TYPE>
    <REFFILE_KEYWORD> ATODTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_SWITCH> ATODCORR </REFFILE_SWITCH>
    <FILE_SELECTION> 
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION> 
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDCHIP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDAMP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDGAIN </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> BPX </REFFILE_TYPE>
    <REFFILE_KEYWORD> BPIXTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_SWITCH> DQICORR </REFFILE_SWITCH>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDCHIP </ROW_SELECTION_FIELD>
      <ROW_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </ROW_SELECTION_TEST>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDAMP </ROW_SELECTION_FIELD>
      <ROW_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </ROW_SELECTION_TEST>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDGAIN </ROW_SELECTION_FIELD>
      <ROW_SELECTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </ROW_SELECTION_TEST>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> CCD </REFFILE_TYPE>
    <REFFILE_KEYWORD> CCDTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDCHIP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDAMP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDGAIN </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDOFSTA </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDOFSTB </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDOFSTC </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDOFSTD </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> BINAXIS1 </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> BINAXIS2 </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> OSC </REFFILE_TYPE>
    <REFFILE_KEYWORD> OSCNTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDCHIP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CCDAMP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> BINX </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> BINY </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> CRR </REFFILE_TYPE>
    <REFFILE_KEYWORD> CRREJTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> CRSPLIT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> MEANEXP </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
  <!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> D2I </REFFILE_TYPE>
    <REFFILE_KEYWORD> D2IMFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <REFFILE_SWITCH> DRIZCORR </REFFILE_SWITCH>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'UVIS') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> MDZ </REFFILE_TYPE>
    <REFFILE_KEYWORD> MDRIZTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <REFFILE_SWITCH> DRIZCORR </REFFILE_SWITCH>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DXY </REFFILE_TYPE>
    <REFFILE_KEYWORD> DGEOFILE </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> FILTER </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
 </INSTRUMENT>
 <INSTRUMENT>
  <INSTRUMENT_NAME> COS </INSTRUMENT_NAME>
  <INSTRUMENT_MISSING_FILE> N/A </INSTRUMENT_MISSING_FILE>
  <REFFILE>
    <REFFILE_TYPE> FLAT </REFFILE_TYPE>
    <REFFILE_KEYWORD> FLATFILE </REFFILE_KEYWORD>
    <REFFILE_SWITCH> FLATCORR </REFFILE_SWITCH>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> GEO </REFFILE_TYPE>
    <REFFILE_KEYWORD> GEOFILE  </REFFILE_KEYWORD>
    <REFFILE_FORMAT> IMAGE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'FUV') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> BADT </REFFILE_TYPE>
    <REFFILE_KEYWORD> BADTTAB </REFFILE_KEYWORD>
    <REFFILE_SWITCH> BADTCORR </REFFILE_SWITCH>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> OBSMODE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
        <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'FUV' and aSource._keywords['OBSMODE'][0] == 'TIME-TAG') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> BRF </REFFILE_TYPE>
    <REFFILE_KEYWORD> BRFTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'FUV') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> BURST </REFFILE_TYPE>
    <REFFILE_KEYWORD> BRSTTAB </REFFILE_KEYWORD>
    <REFFILE_SWITCH> BRSTCORR </REFFILE_SWITCH>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> OBSMODE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
        <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'FUV' and aSource._keywords['OBSMODE'][0] == 'TIME-TAG') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> 1DX </REFFILE_TYPE>
    <REFFILE_KEYWORD> XTRACTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> LIFE_ADJ </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> APERTURE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> BPIX </REFFILE_TYPE>
    <REFFILE_KEYWORD> BPIXTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DEAD </REFFILE_TYPE>
    <REFFILE_KEYWORD> DEADTAB </REFFILE_KEYWORD>
    <REFFILE_SWITCH> DEADCORR </REFFILE_SWITCH>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> DISP </REFFILE_TYPE>
    <REFFILE_KEYWORD> DISPTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> APERTURE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> LAMP </REFFILE_TYPE>
    <REFFILE_KEYWORD> LAMPTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> PHA </REFFILE_TYPE>
    <REFFILE_KEYWORD> PHATAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'FUV') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> PHOT </REFFILE_TYPE>
    <REFFILE_KEYWORD> FLUXTAB </REFFILE_KEYWORD>
    <REFFILE_SWITCH> FLUXCORR </REFFILE_SWITCH>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> APERTURE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> TDS </REFFILE_TYPE> 
    <REFFILE_KEYWORD> TDSTAB </REFFILE_KEYWORD>
    <REFFILE_SWITCH> TDSCORR </REFFILE_SWITCH>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION> 
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> APERTURE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> WCP </REFFILE_TYPE>
    <REFFILE_KEYWORD> WCPTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
      <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> SPWCS </REFFILE_TYPE>
    <REFFILE_KEYWORD> SPWCSTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <REFFILE_REQUIRED> NO </REFFILE_REQUIRED>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> OBSTYPE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> APERTURE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
      <ROW_SELECTION_FIELD> OPT_ELEM </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> CENWAVE </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <ROW_SELECTION>
       <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['OBSTYPE'][0] == 'SPECTROSCOPIC') and (aSource._keywords['EXPTYPE'][0] == 'EXTERNAL/SCI') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> WALK </REFFILE_TYPE>
    <REFFILE_KEYWORD> WALKTAB </REFFILE_KEYWORD>
    <REFFILE_SWITCH> WALKCORR </REFFILE_SWITCH>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> OBSMODE </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <ROW_SELECTION>
        <ROW_SELECTION_FIELD> SEGMENT </ROW_SELECTION_FIELD>
    </ROW_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'FUV' and aSource._keywords['OBSMODE'][0] == 'TIME-TAG') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> GSAG </REFFILE_TYPE>
    <REFFILE_KEYWORD> GSAGTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'FUV') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
<!--====================================-->
  <REFFILE>
    <REFFILE_TYPE> HV </REFFILE_TYPE>
    <REFFILE_KEYWORD> HVTAB </REFFILE_KEYWORD>
    <REFFILE_FORMAT> TABLE </REFFILE_FORMAT>
    <FILE_SELECTION>
        <FILE_SELECTION_FIELD> DETECTOR </FILE_SELECTION_FIELD>
    </FILE_SELECTION>
    <RESTRICTION>
      <RESTRICTION_TEST> (aSource._keywords['DETECTOR'][0] == 'FUV') </RESTRICTION_TEST>
    </RESTRICTION>
  </REFFILE>
 </INSTRUMENT>
</REFERENCE_FILES>
