Calculating SNR
---------------

The SNR is calculated based on the user input exposure time, instrument
configuration, and simulated target spectrum. For spectroscopic modes, these
values are calculated at a particular wavelength specified by the user in
Section 2 of the ETC forms.

**Please  make sure the wavelength that appears in this section is covered by the selected mode.**

Total photon counts from the various light sources are computed by multiplying
the *pysynphot*-derived count rate (in photons/sec) by the user input exposure
time. Each photon count term is depicted below with a \ :sub:`c` subscript.
All terms are calculated for a particular extraction region (aka photometric
extraction aperture). Some terms, shown in parentheses, are optional in that
they apply only to certain exposures. Thermal background, for example, only
applies when an infrared detector is used.


.. image:: images/f1.2.1.1snr.gif
    :alt:   SNR = S_c / N

(i)

*where:*
  | S\ :sub:`c` = Source counts
  | N = Noise

.. image:: images/f1.2.1.2noise.gif
    :alt:    N = sqrt(S_c + BG_r + RN^2)


*where:*
  | BG\ :sub:`c` = Background counts
  | RN = Read Noise

.. image:: images/f1.2.1.3background.gif
    :alt:    BG_c = Sky_c  +  DC_c  + Thermal_c  + CS_c


*where:*
  | DC\ :sub:`c` = Dark Current counts
  | Sky\ :sub:`c` = Sky counts = Earth Shine + Zodiacal Light + (Geocoronal Emission Lines)
  | (Thermal\ :sub:`c`) = Thermal Background counts (optional)
  | (CS\ :sub:`c`) = Coronagraphic Source counts (optional)
  | (Geocoronal Emission Lines) = (optional parameter)

So if (i) is fully expanded with each of its individual terms substituted it becomes:

.. image:: images/f1.2.1.4snrAll.gif
    :alt:    SNR = S_c / sqrt( S_c + Sky_c + DC_c + RN^2 + Thermal_c + CS_c )
    
(ii)

