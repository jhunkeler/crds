#! /bin/sh

# source ~/normal.csh

cd `dirname $0`

./clean

rm -f install.log

st=0

for dir in lib client hst jwst tobs
do
    if (test -e $dir)
    then
    	echo "Installing $dir"
		echo "=====================================================" >>install.log
    	echo "Installing $dir" >> install.log
		echo "=====================================================" >>install.log
	(cd $dir;  ../save_version >svn_version.py;  python setup.py install $* --force)  >> install.log
	st=$st$?
    else
		echo "Skipping $dir"
		echo "=====================================================" >>install.log
		echo "Skipping $dir" >>install.log
		echo "=====================================================" >>install.log
	# is it an error for a directory to be missing?  For the nightly builds I assume it is
	st=${st}1
    fi
done

./clean

echo final status $st
st=`echo $st | tr -d 0 | cut -c1-1`
exit $st
